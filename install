#!/usr/bin/env bash

set -e

DOTBOT_DIR='dotbot'
DOTBOT_BIN='bin/dotbot'
BASEDIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

cd "$BASEDIR"

echo "Installing dotfiles..."

# Update git submodules
git submodule sync --quiet --recursive
git submodule update --init --recursive

# Run dotbot installation
"$BASEDIR/$DOTBOT_DIR/$DOTBOT_BIN" \
    -d "$BASEDIR" \
    --plugin-dir dotbot-brewfile \
    -c install.yml

echo "Installation complete!"
echo "Restart your terminal to apply all changes."