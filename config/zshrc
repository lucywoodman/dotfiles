# Performance optimizations
DISABLE_AUTO_UPDATE="true"
DISABLE_MAGIC_FUNCTION="true"
DISABLE_COMPFIX="true"
skip_global_compinit=1

# Oh-My-Zsh setup
export ZSH="$HOME/.oh-my-zsh"
export ZSH_COMPDUMP="$HOME/.zcompdump"

# Optimized completion loading - cache compinit for 24 hours
autoload -Uz compinit
for dump in ~/.zcompdump(N.mh+24); do
  compinit -d "$ZSH_COMPDUMP"
  break
done
compinit -C -d "$ZSH_COMPDUMP"

# History configuration
CASE_SENSITIVE='false'
HYPHEN_INSENSITIVE='false'
HIST_STAMPS='yyyy-mm-dd'
HIST_IGNORE_SPACE='true'

source "$ZSH/oh-my-zsh.sh"


# === Plugin management ===
source ~/.zgen/zgen.zsh

if ! zgen saved; then
  echo "Creating a zgen save..."

  zgen load Aloxaf/fzf-tab
  zgen load zsh-users/zsh-syntax-highlighting
  zgen load MichaelAquilina/zsh-you-should-use
  zgen load spaceship-prompt/spaceship-prompt spaceship

  zgen save
fi

# === Shell configuration ===
source "$HOME/.shell/.exports"
source "$HOME/.shell/.aliases"
source "$HOME/.shell/.external"
source "$HOME/.shell/.completions"

# Load command functions
if [[ -d "$HOME/.shell/commands" ]]; then
  for cmd_file in "$HOME/.shell/commands"/*; do
    [[ -f "$cmd_file" ]] && source "$cmd_file"
  done
fi

# === Local overrides ===
if [[ -f "$HOME/.shell_env_local" ]]; then
  source "$HOME/.shell_env_local"
fi

# Generated for envman. Do not edit.
[ -s "$HOME/.config/envman/load.sh" ] && source "$HOME/.config/envman/load.sh"
